<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta content="telephone=no" name="format-detection" />
    <title>砸金蛋 竖屏</title>
    <link rel="stylesheet" type="text/css" href="http://www.playwx.com/hd/static/codyLib/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="http://www.playwx.com/hd/static/codyLib/css/idangerous.swiper.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/styleV.css">
    <script src="http://www.playwx.com/hd/static/codyLib/js/modernizr-2.6.2.min.js"></script>
</head>

<body>
    <input type="hidden" id="bg" value="http://www.playwx.com/hd/demo/cody/12/egg/images/bg.jpg" />
    <input type="hidden" id="recordInScreen" value="7" />

    <div class="container">
        <div class="prizeBoxMask"></div>
        <div class="main">
            <div class="mainContent">
                <img class="over_left over" src="images/over_left.png" />
                <img class="over_right over" src="images/over_right.png" />
                <img class="light_left light" src="images/light_left.png" />
                <img class="light_right light" src="images/light_right.png" />

                <div class="eggMain">

                    <div class="eggBoard">
                        <div class="eb1"></div>
                        <div class="eb2"></div>
                    </div>

                    <img src="images/hammer.png" class="hammer" />

                    <div class="eggCenter">
                        <img src="images/egg.png" class="egg egg1 cloud9-item" />
                        <img src="images/egg.png" class="egg egg2 cloud9-item" />
                        <img src="images/egg.png" class="egg egg3 cloud9-item" />
                    </div>

                    <img src="images/light.png" class="egg_light" />
                    <img src="images/board.png" class="board" />

                    <div class="prizeBoxWrapper">
                        <div class="prizeBox">
                            <img src="images/prize-box.png" class="prizeBg" />
                            <div class="user_head">
                                <img src="images/man.png" />
                            </div>
                            <div class="prizeWord">
                                <p>恭喜<span>张三</span>获得<span>三等奖</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>





            <div class="prizeSwiperWrap">
                <div class="prizeTitle">
                    <p>奖品设置</p>
                </div>
                <div class="prizeSwiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="item">
                                一等奖 iphone6一台
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="item">
                                二等奖 ipad mini一台
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="item">
                                三等奖 ipad mini一台
                            </div>
                        </div>
                        <div class="swiper-slide">
                            <div class="item">
                                四等奖 ipad mini一台
                            </div>
                        </div>
                    </div>
                </div>
                <div class="qrcode">
                    <img src="images/qrcode.png" />
                    <p>
                        随机码： <span id="randomNumber">1234</span>
                    </p>
                </div>
            </div>

            <div class="prizeRecordWrap">
                <div class="prizeTitle">
                    <p>中奖记录</p>
                </div>
                <div class="prizeRecordSwiperV">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <p class="item">
                                <span class="item_name">熊大大4</span>
                                <span class="item_state">一等奖</span>
                            </p>
                        </div>
                        <div class="swiper-slide">
                            <p class="item">
                                <span class="item_name">熊大大3</span>
                                <span class="item_state">一等奖</span>
                            </p>
                        </div>
                        <div class="swiper-slide">
                            <p class="item">
                                <span class="item_name">熊大大2</span>
                                <span class="item_state">一等奖</span>
                            </p>
                        </div>
                        <div class="swiper-slide">
                            <p class="item">
                                <span class="item_name">熊大大1</span>
                                <span class="item_state">一等奖</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
    <script type="text/javascript" src="http://www.playwx.com/hd/static/codyLib/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="http://www.playwx.com/hd/static/codyLib/js/idangerous.swiper/idangerous.swiper.min.js"></script>
    <script type="text/javascript" src="http://www.playwx.com/hd/static/codyLib/js/jquery.cloud9carousel.js"></script>
    <script type="text/javascript" src="js/commonV.js"></script>

    <script type="text/javascript">
    $('.mainContent').css({
        'background': 'url(' + $('#bg').val() + ') no-repeat',
        'background-size': '100% 100%'
    })
    </script>

    <script type="text/javascript">
    $(document).ready(function() {

        var recordInScreen = parseInt($('#recordInScreen').val());

        var mainContent = $('.mainContent');
        var windowH = $(window).height();
        mainContent.height(windowH - 300);
        $(window).resize(function() {
            var windowH = $(window).height();
            mainContent.height(windowH - 300);
        })

        var mySwiper;
        var mySwiperInterval;
        if ($('.prizeRecordSwiperV').find('.item').length > recordInScreen) {
            mySwiper = new Swiper('.prizeRecordSwiperV', {
                mode: 'vertical',
                loop: true,
                slidesPerView: recordInScreen,
            })
            mySwiperInterval = setInterval(function() {
                mySwiper.swipePrev();
            }, 2000);
        } else if ($('.prizeRecordSwiperV').find('.item').length <= recordInScreen) {
            mySwiper = new Swiper('.prizeRecordSwiperV', {
                mode: 'vertical',
                slidesPerView: recordInScreen,
            })
        }


        var eggCenter = $('.eggCenter');
        eggCenter.Cloud9Carousel({
            xOrigin: 0,
            yOrigin: 160,
            yRadius: -40,
            xRadius: 200,
            farScale: 0.5,
            buttonLeft: $(""),
            buttonRight: $(""),
            autoPlay: 1,
            autoPlayDelay: 2000,
            speed: 3,
            bringToFront: true,
            onLoaded: function() {
                eggCenter.css('visibility', 'visible');
                eggCenter.css('display', 'none');
                eggCenter.fadeIn(1000);
            }
        });


        $('.egg').click(function(event) {
            if ($(eggCenter.data("carousel").nearestItem().element).attr('class') == ($(event.target).attr('class'))) {
                eggCenter.data("carousel").autoPlayAmount = 0;
                $('.prizeBoxMask').show();
                doPrize();
            }
        })

        $('.hammer').click(function() {
            eggCenter.data("carousel").autoPlayAmount = 0;
            $('.prizeBoxMask').show();
            setTimeout(function() {
                doPrize();
            }, 501)

        });

        function doPrize() {

            var nearestItemClassName = $(eggCenter).data("carousel").nearestItem().element.className;

            $('.prizeBoxWrapper').delay(2000).show(0).delay(5000).hide(0);
            $('.hammer').addClass('active');
            eggCenter.data("carousel").nearestItem().element.src = "images/open_egg.png";
            eggCenter.data("carousel").nearestItem().element.className += ' open';
            $('.egg_light').show();
            setTimeout(function() {
                addPriceRecord("小溪", "二等奖");
            }, 2000);
            setTimeout(function() {
                eggCenter.data("carousel").autoPlayAmount = 1;
                eggCenter.data("carousel").nearestItem().element.src = "images/egg.png";
                eggCenter.data("carousel").nearestItem().element.className = nearestItemClassName;
                $('.egg_light').hide();
                $('.prizeBoxMask').hide();
                $('.hammer').removeClass('active');
            }, 7000);
        }

        function addPriceRecord(user_name, user_state) {
            var slideHtml = '<p class="item"><span class="item_name">' + user_name + '</span><span class="item_state">' + user_state + "</span></p>";
            mySwiper.prependSlide(slideHtml, 'swiper-slide');
            mySwiper.reInit();
            if ($('.prizeRecordSwiperV').find('.item').length == (recordInScreen + 1)) {
                mySwiper = new Swiper('.prizeRecordSwiperV', {
                    mode: 'vertical',
                    loop: true,
                    slidesPerView: recordInScreen,
                })
                mySwiper.swipeTo(0);
                clearInterval(mySwiperInterval);
                mySwiperInterval = setInterval(function() {
                    mySwiper.swipePrev();
                }, 2000);
            } else if ($('.prizeRecordSwiperV').find('.item').length > (recordInScreen + 1)) {
                mySwiper.swipeTo(0);
            }
        }
    })
    </script>
</body>

</html>
