<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=1">
    <meta content="telephone=no" name="format-detection" />
    <title>拆盒子</title>
    <link href="style/base.css" rel="stylesheet">
</head>

<body>


    <!-- 
        id = other_help_state 有三个值

        1代表你还未帮他打开礼盒

        2代表你已经帮他打开礼盒了

        3代表这个礼盒已经被拆开了
     -->


    <input type="hidden" id="other_help_state" value="1">
    <div class="container other_help">
        <div class="share_tip share_help">
            <img src="images/share_help_tip.png" />
        </div>


        <img src="images/logo.png" class="logo" alt="微互动" />
        <div class="gift">
            <img src="images/layer_box.png" class="gift_bg" />
            <img src="images/icon_prize5.png" class="gift_pic" />
        </div>



        <div class="main" id="other_help_state_1">
            <p>
                <span class="user_name">小溪</span>正在参加拆礼盒的活动，邀请你帮忙！
            </p>

            <p>还差
                <span class="remain_count">8</span>个人，才能拆开礼物哦
            </p>

            <a class="help_btn btn" href="#">
                <img src="images/help_btn.png" />
            </a>

            <a class="gift_btn btn" href="index.html">
                <img src="images/gift_btn.png" />
            </a>
        </div>

        <div class="main" id="other_help_state_2">
            <p>
                你已经拆过这个礼盒啦
            </p>
            <p>赶紧去领取自己的礼盒吧
            </p>
            <a class="help_btn btn" href="#">
                <img src="images/ask_for_help.png" />
            </a>
            <a class="gift_btn btn" href="index.html">
                <img src="images/gift_btn.png" />
            </a>
        </div>

        <div class="main" id="other_help_state_3">
            <p>
                人气好旺啊！这个盒子已经被打开
            </p>
            <p>赶紧去领取自己的礼盒吧
            </p>
            <a class="gift_btn btn" href="index.html">
                <img src="images/gift_btn.png" />
            </a>
        </div>

    </div>
    <script src="http://www.playwx.com/hd/static/common/js/jquery-1.10.2.min.js"></script>
    <script src="js/common.js"></script>


    <script type="text/javascript">
    // 状态1是还差多少人才可以打开
    // 状态2是你已经帮忙打开
    //状态3是这个朋友的礼盒已经被打开了
    var other_help_state = parseInt($('#other_help_state').val());
    $('.main').hide();
    $('#other_help_state_' + other_help_state).show();

    if (other_help_state == 2) {
        $('.help_btn').addClass('ask_for_help');
        var pic_src = $('.gift .gift_pic').attr('src').split('.')[0] + '_opened.png';
        $('.gift .gift_pic').attr('src', pic_src);
    }

    $('.help_btn').click(function() {
        if ($(this).hasClass('ask_for_help')) {
            $('.share_help').fadeIn();
        } else {
            $(this).find('img').attr('src', 'images/ask_for_help.png');
            $(this).addClass('ask_for_help');
            var pic_src = $('.gift .gift_pic').attr('src').split('.')[0] + '_opened.png';
            $('.gift .gift_pic').attr('src', pic_src);
            $('#other_help_state_1').find('p').eq(0).html('你已经拆过这个礼盒啦');
            $('#other_help_state_1').find('p').eq(1).html('赶紧去领取自己的礼盒吧');
        }
    })
    
    $('.share_tip').click(function() {
        $(this).fadeOut();
    })
    </script>




</body>

</html>
